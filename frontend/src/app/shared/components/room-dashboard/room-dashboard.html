<div class="d-flex flex-column flex-md-row p-0">
  <!-- Côté gauche : salle info + sliders -->
  <div class="col-12 col-md-3 d-flex flex-column p-4 bg-body text-body">

    <div class="d-flex justify-content-between align-items-center mb-2">
      <h3>Informations</h3>

      <div class="d-flex gap-2">
        <!-- Bouton modifier / enregistrer -->
        <button class="btn btn-sm btn-outline-primary" (click)="toggleEdit()">

          @if (!isEditing) {
            <i class="bi bi-pencil"></i>
          } @else {
            <i class="bi bi-save me-1"></i>
            Enregistrer
          }

        </button>

        <!-- Bouton supprimer -->
        <button class="btn btn-sm btn-outline-danger" (click)="onDeleteRoom()">
          <i class="bi bi-trash"></i>
        </button>
      </div>

    </div>

    <ul class="list-unstyled mb-4">

      <!-- Volume -->
      <li class="mb-2 d-flex align-items-center">
        <i class="bi bi-box-seam me-2"></i>
        Volume:
        @if (!isEditing) {
          <span class="ms-1">{{ room.volumeRoom }} m<sup>3</sup></span>
        } @else {
          <input type="number" class="form-control form-control-sm ms-2"
                 [(ngModel)]="room.volumeRoom">
        }
      </li>

      <!-- Portes -->
      <li class="mb-2 d-flex align-items-center">
        <i class="bi bi-door-open me-2"></i>
        Portes:
        @if (!isEditing) {
          <span class="ms-1">{{ room.nbDoors }}</span>
        } @else {
          <input type="number" class="form-control form-control-sm ms-2"
                 [(ngModel)]="room.nbDoors">
        }
      </li>

      <!-- Surfaces vitrées -->
      <li class="mb-2 d-flex align-items-center">
        <i class="bi bi-grid-3x2 me-2"></i>
        Surfaces vitrées:
        @if (!isEditing) {
          <span class="ms-1">{{ room.glazedSurface }} m<sup>2</sup></span>
        } @else {
          <input type="number" class="form-control form-control-sm ms-2"
                 [(ngModel)]="room.glazedSurface">
        }
      </li>

      <!-- Murs extérieurs -->
      <li class="mb-2 d-flex align-items-center">
        <i class="bi bi-house me-2"></i>
        Murs extérieurs:
        @if (!isEditing) {
          <span class="ms-1">{{ room.nbExteriorWalls }}</span>
        } @else {
          <input type="number" class="form-control form-control-sm ms-2"
                 [(ngModel)]="room.nbExteriorWalls">
        }
      </li>

    </ul>

    <!-- Slider Min Temp -->
    <div class="mb-3">
      <label class="form-label d-flex align-items-center gap-2">
        <i class="bi bi-thermometer-half text-danger"></i>
        Température de confort minimale : {{ room.minTemp }} °C
      </label>

      <input type="range"
             class="form-range"
             min="16"
             max="26"
             step="1"
             [value]="room.minTemp"
             (input)="onMinTempChange($event)">
    </div>

    <!-- Slider Max Temp -->
    <div class="mb-3">
      <label class="form-label d-flex align-items-center gap-2">
        <i class="bi bi-thermometer-high text-danger"></i>
        Température de confort maximale : {{ room.maxTemp }} °C
      </label>

      <input type="range"
             class="form-range"
             min="16"
             max="26"
             step="1"
             [value]="room.maxTemp"
             (input)="onMaxTempChange($event)">
    </div>

    <!-- Slider Min Hum -->
    <div class="mb-3">
      <label class="form-label d-flex align-items-center gap-2">
        <i class="bi bi-droplet-half text-primary"></i>
        Taux d'humidité minimal : {{ room.minHum }} %
      </label>

      <input type="range"
             class="form-range"
             min="40"
             max="70"
             step="5"
             [value]="room.minHum"
             (input)="onMinHumChange($event)">
    </div>

    <!-- Slider Max Hum -->
    <div class="mb-3">
      <label class="form-label d-flex align-items-center gap-2">
        <i class="bi bi-droplet text-primary"></i>
        Taux d'humidité maximal : {{ room.maxHum }} %
      </label>

      <input type="range"
             class="form-range"
             min="40"
             max="70"
             step="5"
             [value]="room.maxHum"
             (input)="onMaxHumChange($event)">
    </div>

  </div>


  <!-- Côté droit : scrollable -->
  <div class="col-12 col-md-9 d-flex flex-column p-4">
    <div class="mb-3">
      <h1>@if (room) { Tableau de bord de la salle "{{room.nameRoom}}"} </h1>
    </div>

    @if (room) {
      <div class="d-flex flex-column gap-4">
        <div class="w-100">
          <app-sensor-graph
            [room]="room"
            valueKey="valueTemp"
            color="rgba(255,99,132,1)"
            style="height:400px; width:100%;">
          </app-sensor-graph>
        </div>
        <div class="w-100">
          <app-sensor-graph
            [room]="room"
            valueKey="valueCO2"
            color="rgba(54,162,235,1)">
            style="height:400px; width:100%;">
          </app-sensor-graph>
        </div>
        <div class="w-100">
          <app-sensor-graph
            [room]="room"
            valueKey="valueHum"
            color="rgba(75, 192, 92, 1)">
            style="height:400px; width:100%;">
          </app-sensor-graph>
        </div>
      </div>
    }
  </div>

</div>
