<div class="row">
  <!-- Partie gauche -->
  <div class="col-md-6 d-flex flex-column p-4">
    <img
      src="images/Cesi.jpg"
      alt="CESI"
      class="img-fluid rounded shadow border border-body mb-4"
      style="max-height:380px; object-fit:cover;"
    />

    <div class="w-100 d-flex flex-column" style="width:600px;">
      <h4 class="mb-3">CrÃ©er une nouvelle salle</h4>

      <div class="row g-2 flex-grow-1 align-items-start">
        <div class="col-md-8 d-flex flex-column justify-content-start">
          <input
            type="text"
            class="form-control mb-3"
            placeholder="Nom de la salle"
            [(ngModel)]="newRoomName"
          />

          <button
            class="btn w-100 btn-outline-secondary mt-auto"
            (click)="onAddRoom()"
            [disabled]="!newRoomName.trim()">
            âž• Ajouter la salle
          </button>
        </div>

        <div class="col-md-4 d-flex align-items-start ">
          <button class="btn btn-primary w-100 mt-0" [routerLink]="['/report']">
            ðŸ“Š Rapport
          </button>
        </div>
      </div>
    </div>
  </div>






  <!-- Partie droite -->
  <div class="col-md-6 d-flex flex-column">
    <div class="mb-3"><h1>Salles</h1></div>
    <div class="mb-3">
      <app-search-bar (search)="onSearchRoom($event)"></app-search-bar>
    </div>

    <div class="flex-grow-1 overflow-auto overflow-x-hidden">
      <div class="row g-4">
        @for (room of pagedRooms; track room.idRoom) {
          <div class="col-12 col-sm-6 col-md-4">
            <app-room-card [room]="room"></app-room-card>
          </div>
        }

        @if (totalPages() > 1) {
          <nav class="bottom-0 mt-3 d-flex justify-content-center py-2" style="z-index:10;">
            <!-- Pagination desktop -->
            <ul class="pagination mb-0 flex-wrap justify-content-center d-none d-sm-flex">
              <li class="page-item" [class.disabled]="currentPage === 1">
                <button class="page-link" (click)="prevPage()"
                        style="background-color:#f0f0f0;color:#555;border:1px solid #dcdcdc;min-width:40px;">
                  &lt;
                </button>
              </li>

              @for (page of getVisiblePages(); track page) {
                <li class="page-item" [class.active]="currentPage === page">
                  <button class="page-link"
                          (click)="goToPage(page)"
                          [style.background-color]="currentPage === page ? '#555' : '#f0f0f0'"
                          [style.color]="currentPage === page ? '#fff' : '#555'"
                          style="border:1px solid #dcdcdc;min-width:40px;">
                    {{ page }}
                  </button>
                </li>
              }

              <li class="page-item" [class.disabled]="currentPage === totalPages()">
                <button class="page-link" (click)="nextPage()"
                        style="background-color:#f0f0f0;color:#555;border:1px solid #dcdcdc;min-width:40px;">
                  &gt;
                </button>
              </li>
            </ul>

            <!-- Pagination mobile -->
            <ul class="pagination mb-0 d-flex d-sm-none justify-content-center">
              <li class="page-item" [class.disabled]="currentPage === 1">
                <button class="page-link bg-body text-body border" (click)="prevPage()"
                        style="min-width:50px;">&lt;</button>
              </li>

              <li class="page-item" [class.disabled]="currentPage === totalPages()">
                <button class="page-link bg-body text-body border" (click)="nextPage()"
                        style="min-width:50px;">&gt;</button>
              </li>
            </ul>
          </nav>
        }
      </div>
    </div>
  </div>
</div>
